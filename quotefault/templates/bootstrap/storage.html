{% extends "bootstrap/base.html" %}
{% from 'bootstrap/macro.html' import display_quotes as display with context %}

{% block styles %}
    <link rel="stylesheet" href="/static/css/votes/upvote.css">
{% endblock %}

{% block body %}
    <div class="container">
        <!-- flash relevant message when submit button is clicked -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}" role="alert">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
        {{ display( quotes ) }}
        <nav aria-label="page selector">
            <ul class="pagination pagination-lg justify-content-center">
                {% if page == 1 %}
                <li class="page-item disabled"> 
                    <a class="page-link" href="/storage/{{ page - 1 }}" tabindex="-1">Previous</a>
                {% else %}
                <li class="page-item">
                    <a class="page-link" href="/storage/{{ page - 1 }}">Previous</a>
                {% endif %}
                </li>
                {% if rows <= 12 %}
                    {% for num in range(1, rows + 1) %}
                        <li class="page-item">
                            <a class="page-link" href="/storage/{{ num }}">{{ num }}</a>
                        </li>
                    {% endfor %}
                {% elif page < 6 %}
                    {% for num in range(1, 12) %}
                        <li class="page-item">
                            <a class="page-link" href="/storage/{{ num }}">{{ num }}</a>
                        </li>
                    {% endfor %}
                {% elif rows - page <= 5 %}
                    {% for num in range(rows - 10, rows + 1) %}
                    <li class="page-item">
                        <a class="page-link" href="/storage/{{ num }}">{{ num }}</a>
                    </li>
                    {% endfor %}
                {% else %}
                    {% for num in range(page - 5, page + 6) %}
                        <li class="page-item">
                            <a class="page-link" href="/storage/{{ num }}">{{ num }}</a>
                        </li>
                    {% endfor %}
                {% endif %}
                {% if page == rows %}
                <li class="page-item disabled">
                    <a class="page-link" href="/storage/{{ page + 1 }}" tabindex="-1">Next</a>
                {% else %}
                <li class="page-item">
                    <a class="page-link" href="/storage/{{ page + 1 }}">Next</a>
                {% endif %}
                </li>
                    
                </li>  
            </ul>
        </nav>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/load_more.js') }}"></script>
    <script src="{{ url_for('static', filename='css/votes/upvote.js') }}"></script>
    <script src="{{ url_for('static', filename='js/vote.js') }}"></script>
{% endblock %}

